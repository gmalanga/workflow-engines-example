<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" id="Definitions_0juvd9w" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.5.0">
  <bpmn:collaboration id="Collaboration_0irdhbm">
    <bpmn:participant id="Participant_0t6p7nj" name="Compensation example 2" processRef="CompensationExample2" />
  </bpmn:collaboration>
  <bpmn:process id="CompensationExample2" name="Compensation example 2" isExecutable="true" camunda:versionTag="1">
    <bpmn:subProcess id="Activity_1p5dv5w">
      <bpmn:incoming>Flow_0xajghq</bpmn:incoming>
      <bpmn:outgoing>Flow_0dahzpn</bpmn:outgoing>
      <bpmn:startEvent id="Event_0kjnvcq" camunda:initiator="starter">
        <bpmn:outgoing>Flow_0a1t8dw</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:userTask id="Activity_0x8tqgr" name="Book theatre ticket" camunda:assignee="${starter}">
        <bpmn:incoming>Flow_0a1t8dw</bpmn:incoming>
        <bpmn:outgoing>Flow_0a9hirc</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:userTask id="Activity_1mnev9o" name="Book dinner" camunda:assignee="${starter}">
        <bpmn:incoming>Flow_0a9hirc</bpmn:incoming>
        <bpmn:outgoing>Flow_1dn57pg</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:userTask id="Activity_0dm1nx6" name="Cancel theatre ticket" isForCompensation="true" camunda:assignee="${starter}" />
      <bpmn:userTask id="Activity_0yt4lj7" name="Cancel dinner" isForCompensation="true" camunda:assignee="${starter}" />
      <bpmn:userTask id="Activity_0e4mtpm" name="Check if going out" camunda:assignee="${starter}">
        <bpmn:extensionElements>
          <camunda:formData>
            <camunda:formField id="goingOut" label="Still going out?" type="enum">
              <camunda:value id="Value_0dfk2ln" name="Yes" />
              <camunda:value id="Value_370na1n" name="No" />
            </camunda:formField>
          </camunda:formData>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1dn57pg</bpmn:incoming>
        <bpmn:outgoing>Flow_0kxe5ug</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:boundaryEvent id="Event_0xrnxia" attachedToRef="Activity_0x8tqgr">
        <bpmn:compensateEventDefinition id="CompensateEventDefinition_0xtn1cj" />
      </bpmn:boundaryEvent>
      <bpmn:boundaryEvent id="Event_0ic6hmq" attachedToRef="Activity_1mnev9o">
        <bpmn:compensateEventDefinition id="CompensateEventDefinition_0qesflt" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_0a1t8dw" sourceRef="Event_0kjnvcq" targetRef="Activity_0x8tqgr" />
      <bpmn:sequenceFlow id="Flow_0a9hirc" sourceRef="Activity_0x8tqgr" targetRef="Activity_1mnev9o" />
      <bpmn:sequenceFlow id="Flow_1dn57pg" sourceRef="Activity_1mnev9o" targetRef="Activity_0e4mtpm" />
      <bpmn:subProcess id="Activity_1na2brc" name="Handle compensation" triggeredByEvent="true">
        <bpmn:endEvent id="Event_0c85zpy">
          <bpmn:incoming>Flow_0zq53we</bpmn:incoming>
        </bpmn:endEvent>
        <bpmn:userTask id="Activity_07gkazy" name="Order a pizza" camunda:assignee="${starter}">
          <bpmn:incoming>Flow_0kt35je</bpmn:incoming>
          <bpmn:outgoing>Flow_0zq53we</bpmn:outgoing>
        </bpmn:userTask>
        <bpmn:intermediateThrowEvent id="Event_1wkolen" name="Cancel dinner">
          <bpmn:incoming>Flow_0x3xjto</bpmn:incoming>
          <bpmn:outgoing>Flow_0kt35je</bpmn:outgoing>
          <bpmn:compensateEventDefinition id="CompensateEventDefinition_056cldz" activityRef="Activity_1mnev9o" />
        </bpmn:intermediateThrowEvent>
        <bpmn:intermediateThrowEvent id="Event_0kyfpwv" name="Cancel theatre">
          <bpmn:incoming>Flow_016sbut</bpmn:incoming>
          <bpmn:outgoing>Flow_0x3xjto</bpmn:outgoing>
          <bpmn:compensateEventDefinition id="CompensateEventDefinition_1citbvy" activityRef="Activity_0x8tqgr" />
        </bpmn:intermediateThrowEvent>
        <bpmn:startEvent id="Event_13ltn6i" name="start compensation">
          <bpmn:outgoing>Flow_016sbut</bpmn:outgoing>
          <bpmn:compensateEventDefinition id="CompensateEventDefinition_147w7fi" />
        </bpmn:startEvent>
        <bpmn:sequenceFlow id="Flow_016sbut" sourceRef="Event_13ltn6i" targetRef="Event_0kyfpwv" />
        <bpmn:sequenceFlow id="Flow_0x3xjto" sourceRef="Event_0kyfpwv" targetRef="Event_1wkolen" />
        <bpmn:sequenceFlow id="Flow_0kt35je" sourceRef="Event_1wkolen" targetRef="Activity_07gkazy" />
        <bpmn:sequenceFlow id="Flow_0zq53we" sourceRef="Activity_07gkazy" targetRef="Event_0c85zpy" />
      </bpmn:subProcess>
      <bpmn:endEvent id="Event_0vjd65g">
        <bpmn:incoming>Flow_0kxe5ug</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="Flow_0kxe5ug" sourceRef="Activity_0e4mtpm" targetRef="Event_0vjd65g" />
      <bpmn:association id="Association_1uivde2" associationDirection="One" sourceRef="Event_0xrnxia" targetRef="Activity_0dm1nx6" />
      <bpmn:association id="Association_0ik1tpv" associationDirection="One" sourceRef="Event_0ic6hmq" targetRef="Activity_0yt4lj7" />
    </bpmn:subProcess>
    <bpmn:startEvent id="Event_1dnjnkj" camunda:initiator="starter">
      <bpmn:outgoing>Flow_0xajghq</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0xajghq" sourceRef="Event_1dnjnkj" targetRef="Activity_1p5dv5w" />
    <bpmn:sequenceFlow id="Flow_0dahzpn" sourceRef="Activity_1p5dv5w" targetRef="Gateway_0d31a61" />
    <bpmn:sequenceFlow id="Flow_0dg8gqm" name="Yes" sourceRef="Gateway_0d31a61" targetRef="Event_0hofg49">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${goingOut == "Value_0dfk2ln"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_19u2jg4" name="No" sourceRef="Gateway_0d31a61" targetRef="Event_1b4p4kw">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${goingOut == "Value_370na1n"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_0d31a61" name="Still going out?">
      <bpmn:incoming>Flow_0dahzpn</bpmn:incoming>
      <bpmn:outgoing>Flow_0dg8gqm</bpmn:outgoing>
      <bpmn:outgoing>Flow_19u2jg4</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="Event_0hofg49">
      <bpmn:incoming>Flow_0dg8gqm</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="Event_1b4p4kw" name="Cancel">
      <bpmn:incoming>Flow_19u2jg4</bpmn:incoming>
      <bpmn:compensateEventDefinition id="CompensateEventDefinition_1haju3s" activityRef="Activity_1p5dv5w" />
    </bpmn:endEvent>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0irdhbm">
      <bpmndi:BPMNShape id="Participant_0t6p7nj_di" bpmnElement="Participant_0t6p7nj" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1170" height="660" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0xajghq_di" bpmnElement="Flow_0xajghq">
        <di:waypoint x="238" y="380" />
        <di:waypoint x="300" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dahzpn_di" bpmnElement="Flow_0dahzpn">
        <di:waypoint x="1090" y="410" />
        <di:waypoint x="1135" y="410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dg8gqm_di" bpmnElement="Flow_0dg8gqm">
        <di:waypoint x="1185" y="410" />
        <di:waypoint x="1252" y="410" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1210" y="392" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19u2jg4_di" bpmnElement="Flow_19u2jg4">
        <di:waypoint x="1160" y="435" />
        <di:waypoint x="1160" y="520" />
        <di:waypoint x="1252" y="520" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1168" y="475" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_1dnjnkj_di" bpmnElement="Event_1dnjnkj">
        <dc:Bounds x="202" y="362" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0d31a61_di" bpmnElement="Gateway_0d31a61" isMarkerVisible="true">
        <dc:Bounds x="1135" y="385" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1123" y="361" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0hofg49_di" bpmnElement="Event_0hofg49">
        <dc:Bounds x="1252" y="392" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1pd247e_di" bpmnElement="Event_1b4p4kw">
        <dc:Bounds x="1252" y="502" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1253" y="545" width="35" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1p5dv5w_di" bpmnElement="Activity_1p5dv5w" isExpanded="true">
        <dc:Bounds x="300" y="110" width="790" height="600" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0a1t8dw_di" bpmnElement="Flow_0a1t8dw">
        <di:waypoint x="368" y="210" />
        <di:waypoint x="420" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0a9hirc_di" bpmnElement="Flow_0a9hirc">
        <di:waypoint x="520" y="210" />
        <di:waypoint x="580" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1dn57pg_di" bpmnElement="Flow_1dn57pg">
        <di:waypoint x="680" y="210" />
        <di:waypoint x="740" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0kxe5ug_di" bpmnElement="Flow_0kxe5ug">
        <di:waypoint x="840" y="210" />
        <di:waypoint x="902" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_0kjnvcq_di" bpmnElement="Event_0kjnvcq">
        <dc:Bounds x="332" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0x8tqgr_di" bpmnElement="Activity_0x8tqgr">
        <dc:Bounds x="420" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1mnev9o_di" bpmnElement="Activity_1mnev9o">
        <dc:Bounds x="580" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0dm1nx6_di" bpmnElement="Activity_0dm1nx6">
        <dc:Bounds x="530" y="380" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0yt4lj7_di" bpmnElement="Activity_0yt4lj7">
        <dc:Bounds x="700" y="290" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0e4mtpm_di" bpmnElement="Activity_0e4mtpm">
        <dc:Bounds x="740" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0vjd65g_di" bpmnElement="Event_0vjd65g">
        <dc:Bounds x="902" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_1uivde2_di" bpmnElement="Association_1uivde2">
        <di:waypoint x="460" y="268" />
        <di:waypoint x="460" y="420" />
        <di:waypoint x="530" y="420" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_0ik1tpv_di" bpmnElement="Association_0ik1tpv">
        <di:waypoint x="630" y="268" />
        <di:waypoint x="630" y="330" />
        <di:waypoint x="700" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Activity_1na2brc_di" bpmnElement="Activity_1na2brc" isExpanded="true">
        <dc:Bounds x="340" y="480" width="698" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_016sbut_di" bpmnElement="Flow_016sbut">
        <di:waypoint x="396" y="570" />
        <di:waypoint x="510" y="570" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0x3xjto_di" bpmnElement="Flow_0x3xjto">
        <di:waypoint x="546" y="570" />
        <di:waypoint x="620" y="570" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0kt35je_di" bpmnElement="Flow_0kt35je">
        <di:waypoint x="656" y="570" />
        <di:waypoint x="738" y="570" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0zq53we_di" bpmnElement="Flow_0zq53we">
        <di:waypoint x="838" y="570" />
        <di:waypoint x="940" y="570" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_0c85zpy_di" bpmnElement="Event_0c85zpy">
        <dc:Bounds x="940" y="552" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_07gkazy_di" bpmnElement="Activity_07gkazy">
        <dc:Bounds x="738" y="530" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1wkolen_di" bpmnElement="Event_1wkolen" bioc:stroke="#000" bioc:fill="#fff">
        <dc:Bounds x="620" y="552" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="604" y="595" width="69" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0kyfpwv_di" bpmnElement="Event_0kyfpwv" bioc:stroke="#000" bioc:fill="#fff">
        <dc:Bounds x="510" y="552" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="494" y="595" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_13ltn6i_di" bpmnElement="Event_13ltn6i" bioc:stroke="#000" bioc:fill="#fff">
        <dc:Bounds x="360" y="552" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="344" y="595" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0xrnxia_di" bpmnElement="Event_0xrnxia">
        <dc:Bounds x="442" y="232" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ic6hmq_di" bpmnElement="Event_0ic6hmq">
        <dc:Bounds x="612" y="232" width="36" height="36" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
